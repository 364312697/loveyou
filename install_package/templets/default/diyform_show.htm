<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title><?php echo $title; ?></title>
<meta name="keywords" content="<?php echo $wkeyword;?>" />
<meta name="description" content="<?php echo $wdescription; ?>" />
<link href="<?php echo $self_path;?>css/style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<?php include template('header.htm');?>
<div id="main_book">
   <h3><span>您现在的位置：<?php echo $location; ?></span></h3>
   <p class="book_title"><?php echo $r['name']; ?></p>
    <form action="dodiyform.php" method="post" enctype="multipart/form-data">
	    <input type="hidden" name="modelid" value="<?php echo $id;?>">
		<table class='diyform_table'>
        <?php 
		foreach($data as $val){
		   $str = $val['isrequired'] ? '<span class="xing">*</span>' : '';
		   $formtype = $val['formtype'];
		   if($formtype == 'input' || $formtype == 'textarea'){
			   echo '<tr>
			   <td>'.$val['name'].'</td><td>'.form::$formtype('name="'.$val['field'].'"', $val['defaultvalue']).$str.'<span class="tips">'.$val['tips'].'</span></td>
			   </tr>';		   
		   }elseif($formtype == 'file'){
		       echo '<tr>
			   <td>'.$val['name'].'</td><td>'.form::input('name="'.$val['field'].'"', '', 'file').$str.'<span class="tips">'.$val['tips'].'</span></td>
			  </tr>';
		   }elseif($formtype == 'date'){
		       echo '<tr>
			   <td>'.$val['name'].'</td><td>'.form::date('name="'.$val['field'].'"', $val['defaultvalue']).$str.'<span class="tips">'.$val['tips'].'</span></td>
			   </tr>';
		   }elseif($formtype == 'number'){
		       echo '<tr>
			   <td>'.$val['name'].'</td><td>'.form::input('name="'.$val['field'].'"', $val['defaultvalue']).$str.'<span class="tips">'.$val['tips'].'</span></td>
			   </tr>';	
		   }elseif($formtype == 'checkbox'){
		       $arr = string2array($val['setting']);
				echo '<tr>
				<td>'.$val['name'].'</td><td>'.form::$formtype($arr['options'], '', 'name="'.$val['field'].'[]"').$str.'<span class="tips">'.$val['tips'].'</span></td>
				</tr>';	
		   }else{
				$arr = string2array($val['setting']);
				echo '<tr>
				<td>'.$val['name'].'</td><td>'.form::$formtype($arr['options'], '', 'name="'.$val['field'].'"').$str.'<span class="tips">'.$val['tips'].'</span></td>
				</tr>';
		   }

		}
		?>
		<tr>
		<td>验证码</td><td><?php echo form::input('name="code" style="width:100px;margin-right:10px"').form::code();?></td>
		</tr>
		<tr>
		<td></td><td><input type='submit' name='dosubmit' value='提交' class='submit'></td>
		</tr>
		</table>
    </form> 
 </div>
 <?php include template('footer.htm');?>