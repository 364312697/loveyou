<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>修改采集节点</title>
<link href="css/style.css" rel="stylesheet" type="text/css" />
<link href="css/member.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery.idTabs.min.js"></script>
</head>
<body>
	<div class="place">
    <span>位置：</span>
    <ul class="placeul">
    <li><a href="main.php">首页</a></li>
    <li><a href="manage_collection.php">采集节点管理</a></li>
    <li><a href="#">修改采集节点</a></li>
    </ul>
    </div>    
    <div class="formbody">
    <div id="usual1" class="column_box"> 
      <form action="" method="post" onSubmit="return check()">			
		<div class="itab">
		<ul> 
		<li><a href="#tab1" class="selected">列表网址规则</a></li> 
		<li><a href="#tab2">文章网址规则</a></li> 
		<li><a href="#tab3">其他设置</a></li> 
		</ul>
		</div>
        
		<div id="tab1" class="column_list">			
			<fieldset>
				<legend>基本信息</legend>
				<table width="100%" class="table_form">
					<tr>
						<td width="120">采集项目名：</td> 
						<td>
						<input type="text" name="name" class="input-text" value="<?php echo $data['name']?>"></input>
						</td>
					</tr>
					<tr>
						<td width="120">采集页面编码：</td> 
						<td>
						<label><input class="radio"  type="radio" name="sourcecharset" <?php if($data['sourcecharset'] == 'utf-8') echo 'checked';?> value="utf-8"> UTF-8</label>&nbsp;
						<label><input class="radio"  type="radio" name="sourcecharset" <?php if($data['sourcecharset'] == 'gbk') echo 'checked';?> value="gbk"> GBK</label>
						</td>
					</tr>
				</table>
			</fieldset>	
			
			<fieldset>
				<legend>列表规则</legend>
				<table width="100%" class="table_form">
					<tr>
						<td width="120">网址类型：</td> 
						<td>
						<label><input class="radio"  type="radio" name="sourcetype" <?php if($data['sourcetype'] == '1') echo 'checked';?> value="1"> 序列网址</label>
						<label><input class="radio"  type="radio" name="sourcetype" <?php if($data['sourcetype'] == '2') echo 'checked';?> value="2"> 单一网页</label>
						</td>
					</tr>
					<tr>
						<td width="120">网址配置：</td> 
						<td>
						 <input type="text" name="urlpage" size="100" value="<?php echo $data['urlpage']?>" class="top5"><br /> 
						 (如为序列网址：http://www.yzmcms.com/rumen/(*).html,页码使用(*)做为通配符。<br /> 
						 页码从: <input type="text" name="pagesize_start" value="<?php echo $data['pagesize_start']?>" size="4"> 到 <input type="text" name="pagesize_end" value="<?php echo $data['pagesize_end']?>" size="4"> 每次增加 <input type="text" name="par_num" size="4" value="<?php echo $data['par_num']?>">
						</td>
					</tr>
					<tr>
						<td width="120">网址配置：</td> 
						<td>
						网址中必须包含 <input type="text" name="url_contain"  value="<?php echo $data['url_contain']?>"> 网址中不得包含  <input type="text" name="url_except"  value="<?php echo $data['url_except']?>">
						</td>
					</tr>
					<tr>
						<td width="120">获取网址：</td> 
						<td>
						区域开始的HTML：<textarea name="url_start" class="top5"><?php echo $data['url_start']?></textarea><br>
						区域结束的HTML：<textarea rows="10" name="url_end" cols="40"><?php echo $data['url_end']?></textarea> </td>
					</tr>
				</table>
			</fieldset>			
		</div>    
		<div id="tab2" class="column_list">
			<fieldset>
				<legend>标题规则</legend>
				<table width="100%" class="table_form">
					<tr>
						<td width="120">匹配规则：</td> 
						<td>
						<textarea name="title_rule"><?php echo $data['title_rule']?></textarea> <span class="red">使用“[内容]”作为通配符 </span>
						</td>
					</tr>
					<tr>
						<td width="120">过滤选项：</td> 
						<td>
<textarea name="title_html_rule" class="top5"><?php echo $data['title_html_rule']?></textarea> <span class="red">使用“[|]”分割多个规则 </span><br/>
选择：					
<label style="margin-right:10px"><input name="html_rule_1" onclick="html_role('html_rule_1','title_html_rule')" value="<p([^>]*)>(.*)</p>" type="checkbox"> &lt;p&gt;</label>
<label style="margin-right:10px"><input name="html_rule_1" onclick="html_role('html_rule_1','title_html_rule')" value="<a([^>]*)>(.*)</a>" type="checkbox"> &lt;a&gt;</label>
<label style="margin-right:10px"><input name="html_rule_1" onclick="html_role('html_rule_1','title_html_rule')" value="<script([^>]*)>(.*)</script>" type="checkbox"> &lt;script&gt;</label>
<label style="margin-right:10px"><input name="html_rule_1" onclick="html_role('html_rule_1','title_html_rule')" value="<iframe([^>]*)>(.*)</iframe>" type="checkbox"> &lt;iframe&gt;</label>
<label style="margin-right:10px"><input name="html_rule_1" onclick="html_role('html_rule_1','title_html_rule')" value="<table([^>]*)>(.*)</table>" type="checkbox"> &lt;table&gt;</label>
<label style="margin-right:10px"><input name="html_rule_1" onclick="html_role('html_rule_1','title_html_rule')" value="<span([^>]*)>(.*)</span>" type="checkbox"> &lt;span&gt;</label>
<label style="margin-right:10px"><input name="html_rule_1" onclick="html_role('html_rule_1','title_html_rule')" value="<b([^>]*)>(.*)</b>" type="checkbox"> &lt;b&gt;</label>
<label style="margin-right:10px"><input name="html_rule_1" onclick="html_role('html_rule_1','title_html_rule')" value="<img([^>]*)>" type="checkbox"> &lt;img&gt;</label>
<label style="margin-right:10px"><input name="html_rule_1" onclick="html_role('html_rule_1','title_html_rule')" value="<object([^>]*)>(.*)</object>" type="checkbox"> &lt;object&gt;</label>
<label style="margin-right:10px"><input name="html_rule_1" onclick="html_role('html_rule_1','title_html_rule')" value="<embed([^>]*)>(.*)</embed>" type="checkbox"> &lt;embed&gt;</label>
<label style="margin-right:10px"><input name="html_rule_1" onclick="html_role('html_rule_1','title_html_rule')" value="<param([^>]*)>(.*)</param>" type="checkbox"> &lt;param&gt;</label>
<label style="margin-right:10px"><input name="html_rule_1" onclick="html_role('html_rule_1','title_html_rule')" value="<div([^>]*)>" type="checkbox"> &lt;div&gt;</label>
<label style="margin-right:10px"><input name="html_rule_1" onclick="html_role('html_rule_1','title_html_rule')" value="</div>" type="checkbox"> &lt;/div&gt;</label>
<label style="margin-right:10px"><input name="html_rule_1" onclick="html_role('html_rule_1','title_html_rule')" value="<!--([^>]*)-->" type="checkbox"> &lt;!-- --&gt;</label>
						</td>
					</tr>
				</table>
			</fieldset>	

			<fieldset>
				<legend>时间规则</legend>
				<table width="100%" class="table_form">
					<tr>
						<td width="120">匹配规则：</td> 
						<td>
						<textarea name="time_rule"><?php echo $data['time_rule']?></textarea> <span class="red">使用“[内容]”作为通配符 </span>
						</td>
					</tr>
					<tr>
						<td width="120">过滤选项：</td> 
						<td>
<textarea name="time_html_rule" class="top5"><?php echo $data['time_html_rule']?></textarea> <span class="red">使用“[|]”分割多个规则 </span><br/>
选择：					
<label style="margin-right:10px"><input name="html_rule_2" onclick="html_role('html_rule_2','time_html_rule')" value="<p([^>]*)>(.*)</p>" type="checkbox"> &lt;p&gt;</label>
<label style="margin-right:10px"><input name="html_rule_2" onclick="html_role('html_rule_2','time_html_rule')" value="<a([^>]*)>(.*)</a>" type="checkbox"> &lt;a&gt;</label>
<label style="margin-right:10px"><input name="html_rule_2" onclick="html_role('html_rule_2','time_html_rule')" value="<script([^>]*)>(.*)</script>" type="checkbox"> &lt;script&gt;</label>
<label style="margin-right:10px"><input name="html_rule_2" onclick="html_role('html_rule_2','time_html_rule')" value="<iframe([^>]*)>(.*)</iframe>" type="checkbox"> &lt;iframe&gt;</label>
<label style="margin-right:10px"><input name="html_rule_2" onclick="html_role('html_rule_2','time_html_rule')" value="<table([^>]*)>(.*)</table>" type="checkbox"> &lt;table&gt;</label>
<label style="margin-right:10px"><input name="html_rule_2" onclick="html_role('html_rule_2','time_html_rule')" value="<span([^>]*)>(.*)</span>" type="checkbox"> &lt;span&gt;</label>
<label style="margin-right:10px"><input name="html_rule_2" onclick="html_role('html_rule_2','time_html_rule')" value="<b([^>]*)>(.*)</b>" type="checkbox"> &lt;b&gt;</label>
<label style="margin-right:10px"><input name="html_rule_2" onclick="html_role('html_rule_2','time_html_rule')" value="<img([^>]*)>" type="checkbox"> &lt;img&gt;</label>
<label style="margin-right:10px"><input name="html_rule_2" onclick="html_role('html_rule_2','time_html_rule')" value="<object([^>]*)>(.*)</object>" type="checkbox"> &lt;object&gt;</label>
<label style="margin-right:10px"><input name="html_rule_2" onclick="html_role('html_rule_2','time_html_rule')" value="<embed([^>]*)>(.*)</embed>" type="checkbox"> &lt;embed&gt;</label>
<label style="margin-right:10px"><input name="html_rule_2" onclick="html_role('html_rule_2','time_html_rule')" value="<param([^>]*)>(.*)</param>" type="checkbox"> &lt;param&gt;</label>
<label style="margin-right:10px"><input name="html_rule_2" onclick="html_role('html_rule_2','time_html_rule')" value="<div([^>]*)>" type="checkbox"> &lt;div&gt;</label>
<label style="margin-right:10px"><input name="html_rule_2" onclick="html_role('html_rule_2','time_html_rule')" value="</div>" type="checkbox"> &lt;/div&gt;</label>
<label style="margin-right:10px"><input name="html_rule_2" onclick="html_role('html_rule_2','time_html_rule')" value="<!--([^>]*)-->" type="checkbox"> &lt;!-- --&gt;</label>
						</td>
					</tr>
				</table>
			</fieldset>	

			<fieldset>
				<legend>内容规则</legend>
				<table width="100%" class="table_form">
					<tr>
						<td width="120">匹配规则：</td> 
						<td>
						<textarea name="content_rule"><?php echo $data['content_rule']?></textarea> <span class="red">使用“[内容]”作为通配符 </span>
						</td>
					</tr>
					<tr>
						<td width="120">过滤选项：</td> 
						<td>
<textarea name="content_html_rule" class="top5"><?php echo $data['content_html_rule']?></textarea> <span class="red">使用“[|]”分割多个规则 </span><br/>
选择：					
<label style="margin-right:10px"><input name="html_rule_3" onclick="html_role('html_rule_3','content_html_rule')" value="<p([^>]*)>(.*)</p>" type="checkbox"> &lt;p&gt;</label>
<label style="margin-right:10px"><input name="html_rule_3" onclick="html_role('html_rule_3','content_html_rule')" value="<a([^>]*)>(.*)</a>" type="checkbox"> &lt;a&gt;</label>
<label style="margin-right:10px"><input name="html_rule_3" onclick="html_role('html_rule_3','content_html_rule')" value="<script([^>]*)>(.*)</script>" type="checkbox"> &lt;script&gt;</label>
<label style="margin-right:10px"><input name="html_rule_3" onclick="html_role('html_rule_3','content_html_rule')" value="<iframe([^>]*)>(.*)</iframe>" type="checkbox"> &lt;iframe&gt;</label>
<label style="margin-right:10px"><input name="html_rule_3" onclick="html_role('html_rule_3','content_html_rule')" value="<table([^>]*)>(.*)</table>" type="checkbox"> &lt;table&gt;</label>
<label style="margin-right:10px"><input name="html_rule_3" onclick="html_role('html_rule_3','content_html_rule')" value="<span([^>]*)>(.*)</span>" type="checkbox"> &lt;span&gt;</label>
<label style="margin-right:10px"><input name="html_rule_3" onclick="html_role('html_rule_3','content_html_rule')" value="<b([^>]*)>(.*)</b>" type="checkbox"> &lt;b&gt;</label>
<label style="margin-right:10px"><input name="html_rule_3" onclick="html_role('html_rule_3','content_html_rule')" value="<img([^>]*)>" type="checkbox"> &lt;img&gt;</label>
<label style="margin-right:10px"><input name="html_rule_3" onclick="html_role('html_rule_3','content_html_rule')" value="<object([^>]*)>(.*)</object>" type="checkbox"> &lt;object&gt;</label>
<label style="margin-right:10px"><input name="html_rule_3" onclick="html_role('html_rule_3','content_html_rule')" value="<embed([^>]*)>(.*)</embed>" type="checkbox"> &lt;embed&gt;</label>
<label style="margin-right:10px"><input name="html_rule_3" onclick="html_role('html_rule_3','content_html_rule')" value="<param([^>]*)>(.*)</param>" type="checkbox"> &lt;param&gt;</label>
<label style="margin-right:10px"><input name="html_rule_3" onclick="html_role('html_rule_3','content_html_rule')" value="<div([^>]*)>" checked type="checkbox"> &lt;div&gt;</label>
<label style="margin-right:10px"><input name="html_rule_3" onclick="html_role('html_rule_3','content_html_rule')" value="</div>" checked type="checkbox"> &lt;/div&gt;</label>
<label style="margin-right:10px"><input name="html_rule_3" onclick="html_role('html_rule_3','content_html_rule')" value="<!--([^>]*)-->"  type="checkbox"> &lt;!-- --&gt;</label>
						</td>
					</tr>
				</table>
			</fieldset>					
		</div>  		
		<div id="tab3" class="column_list">		
			<div class="col_line"><span>　下载图片：</span>	
			 <label><input name="down_attachment" value="1" class="radio"  type="radio" <?php if($data['down_attachment'] == '1') echo 'checked';?>>下载图片</label>
			 <label><input name="down_attachment" value="0" class="radio"  type="radio" <?php if($data['down_attachment'] == '0') echo 'checked';?>>不下载</label>
			</div> 
			<div class="col_line"><span>　导入顺序：</span>	
			 <label><input name="coll_order" value="1" class="radio"  type="radio" <?php if($data['coll_order'] == '1') echo 'checked';?>>与目标站相同</label>
			 <label><input name="coll_order" value="0" class="radio"  type="radio" <?php if($data['coll_order'] == '0') echo 'checked';?>>与目标站相反</label>
			</div> 								
		</div> 
		<input type="submit" class="dosubmit" name="dosubmit" value="提交" />
      </form>			
	</div> 
	  <script type="text/javascript" src="js/check.js"></script> 
    </div>
    <script type="text/javascript">
	function check(){
		 if($("input[name='name']").val()==''){
			 alert('采集项目名不能为空！');
			 return false;
		 }
		 if($("input[name='urlpage']").val()==''){
			 alert('网址配置不能为空！');
			 return false;
		 }		 
	}
	function html_role(id,textid){
			var result="";
			$("input[name='"+id+"']:checked").each(function(){
				   result+=$(this).val()+'[|]'+"\n";
			});
			$("textarea[name='"+textid+"']").val(result);    	
	}
	</script>	
</body>
</html>